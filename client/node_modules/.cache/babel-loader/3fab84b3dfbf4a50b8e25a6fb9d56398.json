{"ast":null,"code":"import { call, put, takeEvery } from 'redux-saga/effects';\nimport { ITodoActionTypes } from '../../types/types';\nimport { TodoApi } from '../../api/index';\nimport { showAlert, hideAlert } from '../actions/index';\n\nconst delay = time => new Promise(resolve => setTimeout(resolve, time));\n\nfunction* sagaGetTodos() {\n  try {\n    const todos = yield call(TodoApi.getTodos);\n    yield put({\n      type: ITodoActionTypes.GET_TODOS_SUCCESS,\n      payload: todos\n    });\n    yield put(showAlert('Справи успішно завантажені', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert(`Неможливо завантажити справи: ${error}`, 'warning'));\n  }\n}\n\nfunction* sagaCreateTodo(action) {\n  try {\n    const todoObject = {\n      title: action.payload,\n      done: false\n    };\n    const todo = yield call(TodoApi.createTodo, todoObject);\n    yield put({\n      type: ITodoActionTypes.CREATE_TODO_SUCCESS,\n      payload: todo\n    });\n    yield put(showAlert('Дело успешно создано', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert(`Не удалось создать дело: ${error}`, 'warning'));\n  }\n}\n\nfunction* sagaDeleteTodo(action) {\n  try {\n    yield call(TodoApi.deleteTodo, action.payload);\n    yield put({\n      type: ITodoActionTypes.DELETE_TODO_SUCCESS,\n      payload: action.payload\n    });\n    yield put(showAlert('Дела успешно удалено', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert(`Не удалось удалить дело: ${error}`, 'warning'));\n  }\n}\n\nfunction* sagaCompleteTodo(action) {\n  try {\n    const todoObject = {\n      done: action.payload.done,\n      id: action.payload.id\n    };\n    yield call(TodoApi.completeTodo, todoObject);\n    yield put({\n      type: ITodoActionTypes.COMPLETE_TODO_SUCCESS,\n      payload: action.payload.id\n    });\n    yield put(showAlert(`Дело успешно ${action.payload.done ? 'завершено' : 'возобновлено'} `, 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert(`Не удалось завершить дело: ${error}`, 'warning'));\n  }\n}\n\nfunction* sagaEditTodo(action) {\n  try {\n    const todoObject = {\n      done: action.payload.done,\n      id: action.payload.id,\n      title: action.payload.title\n    };\n    const todo = yield call(TodoApi.editTodo, todoObject);\n    yield put({\n      type: ITodoActionTypes.EDIT_TODO_SUCCESS,\n      payload: todo,\n      id: action.payload.id\n    });\n    yield put(showAlert('Дело успешно изменено', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert(`Не удалось изменить дело: ${error}`, 'warning'));\n  }\n}\n\nexport function* sagaWatcher() {\n  yield takeEvery(ITodoActionTypes.CREATE_TODO, sagaCreateTodo);\n  yield takeEvery(ITodoActionTypes.DELETE_TODO, sagaDeleteTodo);\n  yield takeEvery(ITodoActionTypes.GET_TODOS, sagaGetTodos);\n  yield takeEvery(ITodoActionTypes.COMPLETE_TODO, sagaCompleteTodo);\n  yield takeEvery(ITodoActionTypes.EDIT_TODO, sagaEditTodo);\n}","map":{"version":3,"names":["call","put","takeEvery","ITodoActionTypes","TodoApi","showAlert","hideAlert","delay","time","Promise","resolve","setTimeout","sagaGetTodos","todos","getTodos","type","GET_TODOS_SUCCESS","payload","error","sagaCreateTodo","action","todoObject","title","done","todo","createTodo","CREATE_TODO_SUCCESS","sagaDeleteTodo","deleteTodo","DELETE_TODO_SUCCESS","sagaCompleteTodo","id","completeTodo","COMPLETE_TODO_SUCCESS","sagaEditTodo","editTodo","EDIT_TODO_SUCCESS","sagaWatcher","CREATE_TODO","DELETE_TODO","GET_TODOS","COMPLETE_TODO","EDIT_TODO"],"sources":["C:/Full stack application/client/src/redux/saga/sagas.ts"],"sourcesContent":["import { call, Effect, put, takeEvery } from 'redux-saga/effects'\nimport { ICompleteAction, ICreateAction, IDeleteAction, ITodo, ITodoActionTypes, IEditAction } from '../../types/types';\nimport { TodoApi } from '../../api/index';\nimport { showAlert, hideAlert } from '../actions/index';\n\nconst delay = (time: number) => new Promise(resolve => setTimeout(resolve, time))\n\nfunction* sagaGetTodos(): Generator<Effect, void, ITodo[]> {\n    try {\n        const todos = yield call(TodoApi.getTodos)\n\n        yield put({ type: ITodoActionTypes.GET_TODOS_SUCCESS, payload: todos })\n        yield put(showAlert('Справи успішно завантажені', 'success'))\n        yield call(delay, 3000)\n        yield put(hideAlert())\n    } catch (error) {\n        yield put(showAlert(`Неможливо завантажити справи: ${error}`, 'warning'))\n    }\n}\n\nfunction* sagaCreateTodo(action: ICreateAction): Generator<Effect, void> {\n    try {\n        const todoObject: Partial<ITodo> = {\n            title: action.payload,\n            done: false\n        }\n\n        const todo = yield call(TodoApi.createTodo, todoObject)\n\n        yield put({ type: ITodoActionTypes.CREATE_TODO_SUCCESS, payload: todo })\n        yield put(showAlert('Дело успешно создано', 'success'))\n        yield call(delay, 3000)\n        yield put(hideAlert())\n    } catch (error) {\n        yield put(showAlert(`Не удалось создать дело: ${error}`, 'warning'))\n    }\n}\n\nfunction* sagaDeleteTodo(action: IDeleteAction): Generator<Effect, void> {\n    try {\n        yield call(TodoApi.deleteTodo, action.payload)\n\n        yield put({ type: ITodoActionTypes.DELETE_TODO_SUCCESS, payload: action.payload })\n        yield put(showAlert('Дела успешно удалено', 'success'))\n        yield call(delay, 3000)\n        yield put(hideAlert())\n    } catch (error) {\n        yield put(showAlert(`Не удалось удалить дело: ${error}`, 'warning'))\n    }\n}\n\nfunction* sagaCompleteTodo(action: ICompleteAction<ITodo>): Generator<Effect, void> {\n    try {\n        const todoObject: Partial<ITodo> = {\n            done: action.payload.done,\n            id: action.payload.id\n        }\n\n        yield call(TodoApi.completeTodo, todoObject)\n\n        yield put({ type: ITodoActionTypes.COMPLETE_TODO_SUCCESS, payload: action.payload.id })\n        yield put(showAlert(`Дело успешно ${action.payload.done ? 'завершено' : 'возобновлено'} `, 'success'))\n        yield call(delay, 3000)\n        yield put(hideAlert())\n    } catch (error) {\n        yield put(showAlert(`Не удалось завершить дело: ${error}`, 'warning'))\n    }\n}\n\nfunction* sagaEditTodo(action: IEditAction): Generator<Effect, void, ITodo> {\n    try {\n        const todoObject: Partial<ITodo> = {\n            done: action.payload.done,\n            id: action.payload.id,\n            title: action.payload.title\n        }\n\n        const todo = yield call(TodoApi.editTodo, todoObject)\n        \n        yield put({ type: ITodoActionTypes.EDIT_TODO_SUCCESS, payload: todo, id: action.payload.id })\n        yield put(showAlert('Дело успешно изменено', 'success'))\n        yield call(delay, 3000)\n        yield put(hideAlert())\n    } catch (error) {\n        yield put(showAlert(`Не удалось изменить дело: ${error}`, 'warning'))\n    }\n}\n\nexport function* sagaWatcher(): Generator<Effect, void> {\n    yield takeEvery(ITodoActionTypes.CREATE_TODO, sagaCreateTodo)\n    yield takeEvery(ITodoActionTypes.DELETE_TODO, sagaDeleteTodo)\n    yield takeEvery(ITodoActionTypes.GET_TODOS, sagaGetTodos)\n    yield takeEvery(ITodoActionTypes.COMPLETE_TODO, sagaCompleteTodo)\n    yield takeEvery(ITodoActionTypes.EDIT_TODO, sagaEditTodo)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}